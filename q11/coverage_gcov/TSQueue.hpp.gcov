        -:    0:Source:TSQueue.hpp
        -:    0:Graph:./objectActive.gcno
        -:    0:Data:./objectActive.gcda
        -:    0:Runs:3
        -:    1:#pragma once
        -:    2:#include <queue>
        -:    3:#include <mutex>
        -:    4:#include <condition_variable>
        -:    5:#include <memory>
        -:    6:#include <string>
        -:    7:#include "Graph.hpp" 
        -:    8:
        -:    9:
        -:   10:// ====== Messages ======
        -:   11:struct Request {
        -:   12:    int client_fd;
        -:   13:    uint64_t job_id;
        -:   14:    int V, R; // R = root/כל פרמטר שאתה רוצה לאEuler
        -:   15:    std::shared_ptr<graph::Graph> g; // מצביע בר-שיתוף/קריאה בלבד
        -:   16:    std::string answer;                    // מצטבר לאורך הפייפליין
        -:   17:};
        -:   18:using ReqPtr = std::shared_ptr<Request>;
        -:   19:
        -:   20:// ====== Thread-safe queue with close() ======
        -:   21:template<class T>
        -:   22:class TSQueue {
        -:   23:    std::queue<T> q; std::mutex m; std::condition_variable cv; bool closed=false;
        -:   24:public:
function _ZN7TSQueueISt10shared_ptrI7RequestEE4pushES2_ called 4 returned 100% blocks executed 75%
       4*:   25:    void push(T v){  std::lock_guard<std::mutex> lk(m); if(closed) return; q.push(std::move(v));  cv.notify_one(); }
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
branch  3 taken 0% (fallthrough)
branch  4 taken 100%
call    5 returned 100%
call    6 returned 100%
branch  7 taken 100% (fallthrough)
branch  8 taken 0% (throw)
call    9 returned 100%
call   10 returned 100%
branch 11 taken 100% (fallthrough)
branch 12 taken 0%
call   13 never executed
function _ZN7TSQueueISt10shared_ptrI7RequestEE3popERS2_ called 8 returned 100% blocks executed 88%
        8:   26:    bool pop(T& out){
        8:   27:        std::unique_lock<std::mutex> lk(m);
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
function _ZZN7TSQueueISt10shared_ptrI7RequestEE3popERS2_ENKUlvE_clEv called 16 returned 100% blocks executed 100%
       24:   28:        cv.wait(lk,[&]{ return closed || !q.empty(); });
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
branch  3 taken 75% (fallthrough)
branch  4 taken 25%
call    5 returned 100%
branch  6 taken 33% (fallthrough)
branch  7 taken 67%
        8:   29:        if(q.empty()) return false; out = std::move(q.front()); q.pop(); return true;
call    0 returned 100%
branch  1 taken 50% (fallthrough)
branch  2 taken 50%
call    3 returned 100%
call    4 returned 100%
call    5 returned 100%
call    6 returned 100%
        8:   30:    }
call    0 returned 100%
call    1 never executed
function _ZN7TSQueueISt10shared_ptrI7RequestEE5closeEv called 4 returned 100% blocks executed 100%
        4:   31:    void close(){  std::lock_guard<std::mutex> lk(m); closed=true;  cv.notify_all(); }
call    0 returned 100%
branch  1 taken 100% (fallthrough)
branch  2 taken 0% (throw)
call    3 returned 100%
call    4 returned 100%
        -:   32:};
